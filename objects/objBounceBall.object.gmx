<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sprBounceBall</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>prtPlayerProjectile</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_inherited();

contactDamage = 1;
attackDelay = 16;

penetrate = 0;
pierces = 2;

grav = 0;

blockCollision = 1;

bulletLimitCost = 1;

image_index = 0;
image_speed = 0;

//var
_xspeed = 0;
_yspeed = 0;

timer = 0;
time = 150;
bounceTime = 2;
bounceTimer = 0;
phase = 0;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (!global.frozen &amp;&amp; phase == 0){
    _xspeed = xspeed;
    _yspeed = yspeed;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_inherited();

if (entityCanStep()){

    if (timer &lt;= time){
        timer++;
        switch(phase){
            case 0:
                if (xcoll != 0 || ycoll != 0){
                    show_debug_message("xspd " + string(_xspeed) + " yspd " + string(_yspeed));
                    if (xcoll &gt; 0) image_index = 2;
                    if (xcoll &lt; 0) image_index = 4;
                    if (ycoll &gt; 0) image_index = 1;
                    if (ycoll &lt; 0) image_index = 3;
                    phase = 1;
                }
            break;
            case 1:
                if (bounceTimer &lt;= bounceTime){
                    xspeed = 0;
                    yspeed = 0;
                    bounceTimer++;
                }
                else{
                    bounceTimer = 0;
                    if (image_index == 2 || image_index == 4){
                        xspeed = -_xspeed;
                        yspeed = _yspeed;
                    }
                    else{
                        xspeed = _xspeed;
                        yspeed = -_yspeed;
                    }
                    show_debug_message("xspd " + string(xspeed) + " yspd " + string(yspeed));
                    x += xspeed;
                    y += yspeed;
                    image_index = 0;
                    phase = 0;
                    playSFX(sfxBallBounce);
                }
            break;
        }
    }
    else{
        xspeed = 0;
        yspeed = 0;
        event_user(EV_DEATH);
    }


}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="24">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var bulletLimit = 6;
var weaponCost = 0.5;
var action = 1; // 0 - no frame; 1 - shoot; 2 - throw; 3 - upwards aim; 4 - upwards diagonal aim; 5 - downwards diagonal aim;
var xOffset = 16;
var yOffset = 0;
var willStop = 0; // If this is 1, the player will halt on shooting ala Metal Blade.

//setting the actual action here
if yDir == -1
{ 
    action = 4;
    xOffset = 13;
    yOffset = -6;
}
else if yDir 
{
    action = 5;
    xOffset = 14;
    yOffset = 6;
}
if (!global.lockBuster)
{
    if (global.keyShootPressed[playerID] &amp;&amp; !playerIsLocked(PL_LOCK_SHOOT))
    {
        var angle = 30;
        var spd = 4;
        for (var i = -1; i &lt;= 1; i++){
            
            var dir = i*angle;
            if (image_xscale &lt; 0)
            {
                dir += 180;
            }
        
            if (yDir != 0)
            {
                dir -= (yDir * 45) * image_xscale;
            }
            
            a = fireWeapon(xOffset, yOffset, objBounceBall, bulletLimit, weaponCost, action, willStop);
            if (a){
                playSFX(sfxBuster);
                a.xspeed = cos(degtorad(dir))*spd;
                a.yspeed = -sin(degtorad(dir))*spd;
            }
        }
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="22">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>weaponSetup("BOUNCE BALL", global.nesPalette[30], global.nesPalette[46], sprWeaponIconsBounceBall);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="20">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_inherited();

instance_create(x, y, objExplosion);
playSFX(sfxMinorExplosion);

var col = choose(0, 4, 8);
var numConfetti = choose(4, 5, 6);
for (var i = 0; i &lt; 10; i++){
    var angle = i*360/numConfetti;
    c = instance_create(x, y, objBounceBallConfetti);
    c.imgStart = col;
    c.image_index = col;
    c.xspeed = cos(degtorad(angle))*10;
    c.yspeed = -sin(degtorad(angle))*10;
    c = instance_create(x, y, objBounceBallConfetti);
    c.imgStart = col;
    c.image_index = col;
    c.xspeed = cos(degtorad(angle + 45))*6;
    c.yspeed = -sin(degtorad(angle + 45))*6;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="18">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var xspd = xspeed;
var yspd = yspeed;
xspeed = -yspd;
yspeed = -xspd;
playSFX(sfxBallBounce);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="17">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_user(8);
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
